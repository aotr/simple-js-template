var TemplateEngine=function(n,e){for(var r,t,a=/<%(.+?)%>/g,c=/(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g,i="with(obj) { var r=[];\n",o=0,s=function(n,e){return i+=e?n.match(c)?n+"\n":"r.push("+n+");\n":""!=n?'r.push("'+n.replace(/"/g,'\\"')+'");\n':"",s};t=a.exec(n);)s(n.slice(o,t.index))(t[1],!0),o=t.index+t[0].length;s(n.substr(o,n.length-o)),i=(i+'return r.join(""); }').replace(/[\r\t\n]/g," ");try{r=new Function("obj",i).apply(e,[e])}catch(l){console.error("'"+l.message+"'"," in \n\nCode:\n",i,"\n")}return r};
